<!--IF NOT MOBILE-->

<ng-container *ngIf="isMobile != true">

  <ng-container *ngIf="isLoaded == false">
    <br />
    <br />
    <br />
    <br />
    <mat-spinner style="margin: auto"></mat-spinner>
  </ng-container>

  <ng-container *ngIf="isLoaded == true">


    <mat-tab-group class="mat-elevation-z4" (selectedTabChange)="loadTab($event)">

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Inventory

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Gallery</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Inventory Gallery
              </h2>
            </div>


            <div class="mat-elevation-z4 rounded-container-flex">
              <br />
              <br />
              <mat-divider></mat-divider>
              <br />
              <div style="width: 100%; overflow-y: scroll; display: flex; flex-wrap:wrap; justify-content: center">

                <ng-container *ngFor="let element of inventoriesDataSource.data; index as i">

                  <div class="inv-box-container mat-elevation-z4" style="max-width: 20%" (click)="openDialogInvEdit(element)">


                    <div style="display: flex; flex-wrap: wrap">
                      <button mat-fab color="primary">{{element.inv_quantity}}</button>&nbsp;
                    </div>

                    <div style="display: flex; flex-wrap: wrap">
                      <h1>
                        {{element.inv_name}}  &nbsp;
                      </h1>
                    </div>

                    <div style="display: flex; flex-wrap: wrap">
                      <h4>
                        Category : {{element.inv_category}}  &nbsp;
                      </h4>
                      <h4>
                        Brand : {{element.inv_brand}}  &nbsp;
                      </h4>
                      <h4>
                        Quantity : {{element.inv_quantity}}  &nbsp;
                      </h4>
                      <h4>
                        Amount : {{element.inv_min_amount}} &nbsp;
                      </h4>
                      <h4>
                        Price : {{element.inv_price | currency:'PHP':'symbol':'4.2-2'}} &nbsp;
                      </h4>
                    </div>

                    <h5>{{element.inv_description}}</h5>

                    <div style="display: flex; flex-wrap: wrap; flex: auto">


                    </div>


                  </div>

                </ng-container>

              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Inventory Gallery
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>
                <ng-container *ngIf="userRole != 'sales_clerk'">
                  <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogInvAdd()"> Add Item <mat-icon>add</mat-icon></button>&nbsp;
                </ng-container>
                
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #empPaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>

            <div class="mat-elevation-z4 rounded-container-flex">

              <div style="width: 100%; overflow-x: scroll;">

                <mat-table [dataSource]="inventoriesDataSource" class="mat-elevation-z0" style="width: 100%" matSort>

                  <ng-container matColumnDef="inv_name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_name}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="_id" sticky>
                    <mat-header-cell *matHeaderCellDef> Database ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element._id}} </mat-cell>
                  </ng-container>


                  <ng-container matColumnDef="inv_description">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Description </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_description}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="inv_category">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_category}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="inv_quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_quantity}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="inv_supplier">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Supplier </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_supplier}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="inv_min_amount">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Minimum Amount </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_min_amount}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="inv_price">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_price}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="actions" stickyEnd>
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let element">

                      <button mat-raised-button color="accent" (click)="openDialogInvEdit(element)"> Edit <mat-icon>visibility</mat-icon> </button>

                    </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="inventoriesDisplayedColumns"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: inventoriesDisplayedColumns;"></mat-row>
                </mat-table>

              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Purchases

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Table</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 control-container">

              <div class="mat-elevation-z4 rounded-container-title">
                <h2 style="text-align: center; color: white">
                  Purchases Table
                </h2>
              </div>

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">

                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateStart" [(ngModel)]="startDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateStart">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateStart></mat-datepicker>
                </mat-form-field>&nbsp;

                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateEnd" [(ngModel)]="endDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateEnd">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateEnd></mat-datepicker>
                </mat-form-field>&nbsp;

              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Purchased
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostPurchased}}</h1>
                </div>
              </div>



              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Costly
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostExpensive}}</h1>
                </div>
              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">
                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="purcTitle"
                              [type]="purcChartType"
                              [data]="purcData"
                              [columns]="purcColumnNames"
                              [options]="purcOptions"
                              [dynamicResize]="dynamicResize">



                </google-chart>
              </div>

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">

                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="purc2Title"
                              [type]="purc2ChartType"
                              [data]="purc2Data"
                              [columns]="purc2ColumnNames"
                              [options]="purcOptions"
                              [dynamicResize]="dynamicResize">



                </google-chart>

              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">

                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="purc3Title"
                              [type]="purc3ChartType"
                              [data]="purc3Data"
                              [columns]="purc3ColumnNames"
                              [options]="purc3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>




              </div>

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">


                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="purc4Title"
                              [type]="purc4ChartType"
                              [data]="purc4Data"
                              [columns]="purc4ColumnNames"
                              [options]="purc3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>

              </div>

            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 100%; height: 50vh;">


                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="purc6Title"
                              [type]="purc6ChartType"
                              [data]="purc6Data"
                              [columns]="purc6ColumnNames"
                              [options]="purc3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>


              </div>


            </div>

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Purchases Table
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>

                <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogPurchasePDF()"> Generate Purchase CSV <mat-icon> insert_drive_file</mat-icon></button>&nbsp;
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #purcPaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>

            <div class="mat-elevation-z4 rounded-container-flex">

              <div style="width: 100%; overflow-x: scroll;">

                <!--['purc_number', 'purc_itemID', 'purc_itemName', 'purc_supplier', 'purc_price','purc_quantity', 'created_at'];-->

                <mat-table [dataSource]="purchasesDataSource" class="mat-elevation-z0" style="width: 100%" matSort #purcSort="matSort" matSortActive="created_at" matSortDirection="desc">

                  <ng-container matColumnDef="_id" sticky>
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Database ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element._id}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_number">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Number </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_number}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_itemID">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Product ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_itemID}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_itemName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Item Name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_itemName}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_supplier">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Supplier </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_supplier}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_price">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Amount </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_price}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="purc_quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.purc_quantity}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="created_at">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Date Created </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.created_at}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="actions" stickyEnd>
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let element">

                      <button mat-raised-button color="accent" (click)="openDialogPurchaseEdit(element)"> Edit <mat-icon>visibility</mat-icon> </button>

                    </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="purchasesDisplayedColumns"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: purchasesDisplayedColumns;"></mat-row>
                </mat-table>

              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Sales

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Table</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 control-container">

              <div class="mat-elevation-z4 rounded-container-title">
                <h2 style="text-align: center; color: white">
                  Sales Table
                </h2>
              </div>

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">

                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateStart" [(ngModel)]="startDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateStart">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateStart></mat-datepicker>
                </mat-form-field>&nbsp;

                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateEnd" [(ngModel)]="endDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateEnd">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateEnd></mat-datepicker>
                </mat-form-field>&nbsp;

              </div>


            </div>



            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Sold
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostSoldItem}}</h1>
                </div>
              </div>



              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Profitable
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostProfitable}}</h1>
                </div>
              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">
                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="saleTitle"
                              [type]="saleChartType"
                              [data]="saleData"
                              [columns]="saleColumnNames"
                              [options]="saleOptions"
                              [dynamicResize]="dynamicResize">



                </google-chart>
              </div>

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">

                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="sale2Title"
                              [type]="sale2ChartType"
                              [data]="sale2Data"
                              [columns]="sale2ColumnNames"
                              [options]="saleOptions"
                              [dynamicResize]="dynamicResize">



                </google-chart>

              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">

                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="sale3Title"
                              [type]="sale3ChartType"
                              [data]="sale3Data"
                              [columns]="sale3ColumnNames"
                              [options]="sale3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>




              </div>

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 50%; height: 50vh;">


                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="sale4Title"
                              [type]="sale4ChartType"
                              [data]="sale4Data"
                              [columns]="sale4ColumnNames"
                              [options]="sale3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>

              </div>

            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 100%; height: 50vh;">


                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="sale6Title"
                              [type]="sale6ChartType"
                              [data]="sale6Data"
                              [columns]="sale6ColumnNames"
                              [options]="sale3Options"
                              [dynamicResize]="dynamicResize">



                </google-chart>


              </div>


            </div>

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Purchases Table
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>

                <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogSalePDF()"> Generate Sale CSV <mat-icon> insert_drive_file</mat-icon></button>&nbsp;
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #salePaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>

            <div class="mat-elevation-z4 rounded-container-flex">

              <div style="width: 100%; overflow-x: scroll;">

                <mat-table [dataSource]="salesDataSource" class="mat-elevation-z0" style="width: 100%" matSort #saleSort="matSort" matSortActive="created_at" matSortDirection="desc">

                  <ng-container matColumnDef="_id" sticky>
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Database ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element._id}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_number">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Number </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_number}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_itemID">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Product ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_itemID}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_itemName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Item Name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_itemName}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_supplier">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Supplier </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_supplier}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_price">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Amount </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_price}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="sale_quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.sale_quantity}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="created_at">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Date Created </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.created_at}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="actions" stickyEnd>
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let element">

                      <button mat-raised-button color="accent" (click)="openDialogPurchaseEdit(element)"> Edit <mat-icon>visibility</mat-icon> </button>

                    </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="salesDisplayedColumns"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: salesDisplayedColumns;"></mat-row>
                </mat-table>

              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Sales

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Table</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 control-container">

              <div class="mat-elevation-z4 rounded-container-title">
                <h2 style="text-align: center; color: white">
                  Sales Table
                </h2>
              </div>

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">

                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateStart" [(ngModel)]="startDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateStart">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateStart></mat-datepicker>
                </mat-form-field>&nbsp;

                <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Start Date</mat-label>
                  <input matInput [matDatepicker]="pickerCalendarDateEnd" [(ngModel)]="endDate" (dateInput)="loadTab(1)">
                  <mat-hint>MM/DD/YYYY</mat-hint>
                  <mat-datepicker-toggle matSuffix [for]="pickerCalendarDateEnd">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #pickerCalendarDateEnd></mat-datepicker>
                </mat-form-field>&nbsp;

              </div>


            </div>



            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Sold
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostSoldItem}}</h1>
                </div>
              </div>


              <div class="mat-elevation-z4 home-box-container" style="flex: auto; min-width: 20%">
                <div>
                  <h1 style="text-align: center; color: white; ">
                    Most Profitable
                  </h1>
                  <mat-divider></mat-divider>
                  <br />

                  <h1 style="text-align: center; color: white; font-size: xx-large ">{{mostProfitable}}</h1>
                </div>
              </div>


            </div>

            <div style="width: 100%; display: flex">

              <div class="mat-elevation-z4 rounded-container-flex" style="width: 100%; height: 50vh;">


                <google-chart #chart style="width: 100%; height: 100%"
                              [title]="summTitle"
                              [type]="summChartType"
                              [data]="summData"
                              [columns]="summColumnNames"
                              [options]="summOptions"
                              [dynamicResize]="dynamicResize">



                </google-chart>


              </div>



            </div>

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Purchases Table
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>

                <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogSalePDF()"> Generate Sale CSV <mat-icon> insert_drive_file</mat-icon></button>&nbsp;
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #salePaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>



            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>



    </mat-tab-group>

  </ng-container>

</ng-container>



<!--IF MOBILE-->
<!--<ng-container *ngIf="isMobile == true">

</ng-container>-->
<!--ADD ITEM-->
<ng-template #invAddDialog let-data>
  <h2 matDialogTitle>New Item</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <!--<mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Database ID</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;-->

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Item ID</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 40% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.inv_name" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 40% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_category" [ngStyle]="{'background-color': data.inv_category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 40% ;flex:auto;border-radius: 16px !important">
      <mat-label>Brand</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_brand" [ngStyle]="{'background-color': data.inv_brand? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 40% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput placeholder="Ex. 22.00" type="number" [(ngModel)]="data.inv_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="Ex. 1" type="number" [(ngModel)]="data.inv_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum Stock</mat-label>
      <input matInput placeholder="Ex. 1.00" type="number" [(ngModel)]="data.inv_min_amount" [ngStyle]="{'background-color': data.inv_min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 40% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_description" [ngStyle]="{'background-color': data.inv_description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ; flex:auto; border-radius: 16px !important">
      <mat-label>Image</mat-label>
      <ngx-mat-file-input [(ngModel)]="data.imageData">
      </ngx-mat-file-input>
      
    </mat-form-field>&nbsp;
    <input type="file"  name="image" (change)="selectImage($event)" />
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-raised-button matDialogClose color="primary" (click)="addNewItem(data)">Ok</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>
  </mat-dialog-actions>
</ng-template>

<!--CLONE ITEM-->

<ng-template #invCloneDialog let-data>
  <h2 matDialogTitle>New Item</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <!--<mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Database ID</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;-->

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Item ID</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.inv_name" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_category" [ngStyle]="{'background-color': data.inv_category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Brand</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_brand" [ngStyle]="{'background-color': data.inv_brand? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput placeholder="Ex. 22.00" type="number" [(ngModel)]="data.inv_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="Ex. 1" type="number" [(ngModel)]="data.inv_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum</mat-label>
      <input matInput placeholder="Ex. 1.00" type="number" [(ngModel)]="data.inv_min_amount" [ngStyle]="{'background-color': data.inv_min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 80% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_description" [ngStyle]="{'background-color': data.inv_description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ; flex:auto; border-radius: 16px !important">
      <mat-label>Image</mat-label>
      <ngx-mat-file-input [(ngModel)]="data.imageData">
      </ngx-mat-file-input>
    </mat-form-field>&nbsp;

  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-raised-button matDialogClose color="primary" (click)="addNewItem(data)">Ok</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>
  </mat-dialog-actions>
</ng-template>


<!--EDIT INV-->

<ng-template #invEditDialog let-data>
  <h2 matDialogTitle style="display: flex">
    {{data.inv_id}}  &nbsp;|&nbsp; {{data.inv_name}} &nbsp; Total Value : {{data.inv_quantity * data.inv_price | currency:'PHP':'symbol-narrow':'4.2-2'}} &nbsp;
    <span style="flex: 1 1 auto;"></span>
    <button mat-raised-button matDialogClose color="primary" (click)="openDialogInvClone(data)">Clone</button>&nbsp;
    <ng-container *ngIf="data.isArchive == 0; then thenBlock else elseBlock"></ng-container>
    <ng-template #thenBlock><button mat-raised-button matDialogClose color="warn" (click)="archiveInv(data)"><mat-icon>archive</mat-icon>Archive</button></ng-template>
    <ng-template #elseBlock><button mat-raised-button matDialogClose color="accent" (click)="restoreInv(data)"><mat-icon>restore</mat-icon>Restore</button></ng-template>&nbsp;
    <button mat-raised-button matDialogClose color="danger" routerLink="." (click)="deleteInv(data)"><mat-icon>delete_forever</mat-icon>Delete</button>&nbsp;
  </h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
      <br />
      <br />
      <br />
    </div>

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Databse ID</mat-label>
      <input disabled matInput type="text" [(ngModel)]="data._id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.inv_name" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_category" [ngStyle]="{'background-color': data.inv_category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Brand</mat-label>
      <input matInput placeholder="Ex. Sales" type="text" [(ngModel)]="data.inv_category" [ngStyle]="{'background-color': data.inv_category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.inv_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput required placeholder="Ex. 22.00" type="number" [(ngModel)]="data.inv_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput required placeholder="Ex. 1" type="number" [(ngModel)]="data.inv_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum Stock</mat-label>
      <input matInput placeholder="Ex. 1.00" type="number" [(ngModel)]="data.inv_min_amount" [ngStyle]="{'background-color': data.inv_min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 80% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput type="text" [(ngModel)]="data.inv_description" [ngStyle]="{'background-color': data.inv_description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ; flex:auto; border-radius: 16px !important">
      <mat-label>Image</mat-label>
      <ngx-mat-file-input [(ngModel)]="data.inv_imgUrl" [ngStyle]="{'background-color': data.inv_imgUrl? '' : 'var(--warn-lighter-color)'}">
      </ngx-mat-file-input>
    </mat-form-field>&nbsp;

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
      <br />
    </div>

    <div style="width: 100%; display: flex; align-items: flex-start; align-content:baseline">

      <h4 style="max-width: 20% ;flex:auto">Sell Item</h4>
      <span style="flex: 1 1 auto;"></span>

      <mat-form-field appearance="outline" style="min-width: 20% ;flex:auto;border-radius: 16px !important">
        <mat-label>Sale Quantity</mat-label>
        <input matInput required placeholder="1" type="number" value="0" [(ngModel)]="data.sale_quantity" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
      </mat-form-field>&nbsp;

      <mat-form-field appearance="outline" style="min-width: 20% ;flex:auto;border-radius: 16px !important">
        <mat-label>Sale Price</mat-label>
        <input matInput required placeholder="1" type="number" [(ngModel)]="data.sale_price" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
      </mat-form-field>&nbsp;

      &nbsp;&nbsp;&nbsp;

      <h5 style="max-width: 20% ;flex:auto">Amount After Sale : {{data.inv_quantity - data.sale_quantity}}</h5>&nbsp;
      <span style="flex: 1 1 auto;"></span>
      <h3 style="max-width: 20% ;flex:auto">Total : PHP&nbsp; {{data.sale_quantity * data.sale_price}}</h3>
      <button style="max-width: 20% ;flex:auto" mat-raised-button color="primary" (click)="addSale(data)">Add Sale</button>

    </div>

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
      <br />
    </div>

    <div style="width: 100%; display: flex; align-items: flex-start; align-content:baseline">

      <h4 style="max-width: 20% ;flex:auto">Restock Item</h4>
      <span style="flex: 1 1 auto;"></span>
      <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
        <mat-label>Purchase Quantity</mat-label>
        <input matInput required placeholder="1" type="number" value="0" [(ngModel)]="data.purc_quantity" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
      </mat-form-field>&nbsp;

      <mat-form-field appearance="outline" style="min-width: 20% ;flex:auto;border-radius: 16px !important">
        <mat-label>Purchase Price</mat-label>
        <input matInput required placeholder="1" type="number" [(ngModel)]="data.purc_price" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
      </mat-form-field>&nbsp;

      &nbsp;&nbsp;&nbsp;

      <h5 style="max-width: 20% ;flex:auto">Amount After Purchase : {{data.inv_quantity + data.purc_quantity}}</h5>&nbsp;
      <span style="flex: 1 1 auto;"></span>
      <h3 style="max-width: 20% ;flex:auto">Total : PHP&nbsp;  {{data.purc_quantity * data.purc_price}}</h3>
      <button style="max-width: 20% ;flex:auto" mat-raised-button color="primary" (click)="addPurchase(data)">Add Purchase</button>

    </div>

  </mat-dialog-content>
  <mat-dialog-actions align="end">

    <button mat-raised-button matDialogClose color="warn" (click)="editInv(data)">Apply Changes</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>

  </mat-dialog-actions>
</ng-template>

<ng-template #purchaseEditDialog let-data>
  <h2 matDialogTitle style="display: flex">
    {{data._id}}  &nbsp;|&nbsp; {{data.purc_itemName}} &nbsp; Total Value : {{data.purc_quantity * data.purc_price | currency:'PHP':'symbol-narrow':'4.2-2'}} &nbsp;
    <span style="flex: 1 1 auto;"></span>
    <button mat-raised-button matDialogClose color="primary" (click)="openDialogInvClone(data)">Clone</button>&nbsp;
    <ng-container *ngIf="data.isArchive == 0; then thenBlock else elseBlock"></ng-container>
    <ng-template #thenBlock><button mat-raised-button matDialogClose color="warn" (click)="archivePurchase(data)"><mat-icon>archive</mat-icon>Archive</button></ng-template>
    <ng-template #elseBlock><button mat-raised-button matDialogClose color="accent" (click)="restorePurchase(data)"><mat-icon>restore</mat-icon>Restore</button></ng-template>&nbsp;
    <button mat-raised-button matDialogClose color="danger" routerLink="." (click)="deletePurchase(data)"><mat-icon>delete_forever</mat-icon>Delete</button>&nbsp;
  </h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
      <br />
      <br />
      <br />
    </div>

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Databse ID</mat-label>
      <input disabled matInput type="text" [(ngModel)]="data._id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput disabled type="text" [(ngModel)]="data.purc_itemId" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput disabled placeholder="Ex. Juan De" type="text" [(ngModel)]="data.purc_itemName" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.purc_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput required placeholder="Ex. 22.00" type="number" [(ngModel)]="data.purc_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput required placeholder="Ex. 1" type="number" [(ngModel)]="data.purc_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


  </mat-dialog-content>
  <mat-dialog-actions align="end">

    <button mat-raised-button matDialogClose color="warn" (click)="editPurchase(data)">Apply Changes</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>

  </mat-dialog-actions>
</ng-template>


<ng-template #saleEditDialog let-data>
  <h2 matDialogTitle style="display: flex">
    {{data._id}}  &nbsp;|&nbsp; {{data.sales_itemName}} &nbsp; Total Value : {{data.sales_quantity * data.sales_price | currency:'PHP':'symbol-narrow':'4.2-2'}} &nbsp;
    <span style="flex: 1 1 auto;"></span>
    <button mat-raised-button matDialogClose color="primary" (click)="openDialogInvClone(data)">Clone</button>&nbsp;
    <ng-container *ngIf="data.isArchive == 0; then thenBlock else elseBlock"></ng-container>
    <ng-template #thenBlock><button mat-raised-button matDialogClose color="warn" (click)="archiveSale(data)"><mat-icon>archive</mat-icon>Archive</button></ng-template>
    <ng-template #elseBlock><button mat-raised-button matDialogClose color="accent" (click)="restoreSale(data)"><mat-icon>restore</mat-icon>Restore</button></ng-template>&nbsp;
    <button mat-raised-button matDialogClose color="danger" routerLink="." (click)="deleteSale(data)"><mat-icon>delete_forever</mat-icon>Delete</button>&nbsp;
  </h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
      <br />
      <br />
      <br />
    </div>

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Databse ID</mat-label>
      <input disabled matInput type="text" [(ngModel)]="data._id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput disabled type="text" [(ngModel)]="data.sale_itemId" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput disabled placeholder="Ex. Juan De" type="text" [(ngModel)]="data.sale_itemName" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.sale_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput required placeholder="Ex. 22.00" type="number" [(ngModel)]="data.sale_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput required placeholder="Ex. 1" type="number" [(ngModel)]="data.sale_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


  </mat-dialog-content>
  <mat-dialog-actions align="end">

    <button mat-raised-button matDialogClose color="warn" (click)="editSale(data)">Apply Changes</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>

  </mat-dialog-actions>
</ng-template>

<ng-template #purchasePDF let-data>
  <h2 matDialogTitle style="display: flex">Purchase Transaction Form</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
    </div>

    <mat-form-field appearance="fill">
      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate [(ngModel)]="data.startDate" placeholder="Start date">
        <input matEndDate [(ngModel)]="data.endDate" placeholder="End date">
      </mat-date-range-input>

      <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

    <!--
       style="display: none;"

      <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Databse ID</mat-label>
      <input disabled matInput type="text" [(ngModel)]="data._id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput disabled type="text" [(ngModel)]="data.sale_itemId" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput disabled placeholder="Ex. Juan De" type="text" [(ngModel)]="data.sale_itemName" [ngStyle]="{'background-color': data.inv_name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input matInput placeholder="Ex. Juan De" type="text" [(ngModel)]="data.sale_supplier" [ngStyle]="{'background-color': data.inv_supplier? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput required placeholder="Ex. 22.00" type="number" [(ngModel)]="data.sale_price" [ngStyle]="{'background-color': data.inv_price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 10% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput required placeholder="Ex. 1" type="number" [(ngModel)]="data.sale_quantity" [ngStyle]="{'background-color': data.inv_quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp; -->


  </mat-dialog-content>
  <mat-dialog-actions align="end">

    <button mat-raised-button matDialogClose color="warn" (click)="generatePurchasePDF(data)">Generate CSV</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>

  </mat-dialog-actions>
</ng-template>

<ng-template #salePDF let-data>
  <h2 matDialogTitle style="display: flex">Sale Transaction Form</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <div style="width: 100%;">
      <br />
      <mat-divider></mat-divider>
    </div>

    <mat-form-field appearance="fill">
      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate [(ngModel)]="data.startDate" placeholder="Start date">
        <input matEndDate [(ngModel)]="data.endDate" placeholder="End date">
      </mat-date-range-input>

      <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

  </mat-dialog-content>
  <mat-dialog-actions align="end">

    <button mat-raised-button matDialogClose color="warn" (click)="generateSalePDF(data)">Generate CSV</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>

  </mat-dialog-actions>
</ng-template>


<!-- <div class="mat-elevation-z4 rounded-container-flex" style="width: 100%; display: none;" id="purchasePDFkekw" #purchasePDFkekw>
  <mat-table [dataSource]="purchasesDataSourcePDF" class="mat-elevation-z0" style="width: 100%">

    <ng-container matColumnDef="_id" sticky>
      <mat-header-cell *matHeaderCellDef> Database ID </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element._id}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="purc_itemID">
      <mat-header-cell *matHeaderCellDef> Product ID </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.purc_itemID}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="purc_itemName">
      <mat-header-cell *matHeaderCellDef> Item Name </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.purc_itemName}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="purc_supplier">
      <mat-header-cell *matHeaderCellDef> Supplier </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.purc_supplier}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="purc_price">
      <mat-header-cell *matHeaderCellDef> Amount </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.purc_price}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="purc_quantity">
      <mat-header-cell *matHeaderCellDef> Quantity </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.purc_quantity}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="created_at">
      <mat-header-cell *matHeaderCellDef> Date Created </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.created_at}} </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="purchasesDisplayedPDFColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: purchasesDisplayedPDFColumns;"></mat-row>
  </mat-table>

</div> -->
