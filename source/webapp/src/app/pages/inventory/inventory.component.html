<!--IF NOT MOBILE-->

<ng-container *ngIf="isMobile != true">

  <ng-container *ngIf="isLoaded == false">
    <br />
    <br />
    <br />
    <br />
    <mat-spinner style="margin: auto"></mat-spinner>
  </ng-container>

  <ng-container *ngIf="isLoaded == true">

    <!--<mat-tab-group (selectedTabChange)="loadOnstart()">-->

    <mat-tab-group class="mat-elevation-z4" (selectedTabChange)="loadTab($event)">

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Inventory Gallery

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Gallery</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Inventory Gallery
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>

                <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogInvAdd()"> Add Item <mat-icon>add</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;" (click)="openDialogInvAddInvoice()"> Add Purchase Invoice <mat-icon>add</mat-icon></button>&nbsp;
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #empPaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>

            <div class="mat-elevation-z4 rounded-container-flex">
              <br />
              <br />
              <mat-divider></mat-divider>
              <br />
              <div style="width: 100%; overflow-y: scroll; display: flex; flex-wrap:wrap; justify-content: center">

                <ng-container *ngFor="let element of inventoriesGalleryData; index as i">

                  <div class="inv-box-container mat-elevation-z4" style="background-image: url({{element.imageUrl}}); background-position: center; background-size: cover; opacity: .8">
                    <button mat-fab color="warn">{{element.quantity}}</button>
                    <span style="flex: 1 1 auto;"></span>
                    <div style="flex: auto"><h4></h4></div>
                    <mat-chip-list>
                      <mat-chip color="accent" selected>{{element.category}}</mat-chip>
                    </mat-chip-list>
                    <span style="flex: 1 1 auto;"></span>

                    <button mat-raised-button color="primary" (click)="openDialogInvEdit(element)"><mat-icon>visibility</mat-icon>&nbsp; View {{element.name}}&nbsp; </button>
                  </div>

                </ng-container>
                                                                          
              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>

      <mat-tab>

        <ng-template mat-tab-label>

          <mat-icon>auto_awesome_mosaic</mat-icon>

          Inventory Table

        </ng-template>

        <mat-toolbar color="primary" class="mat-elevation-z22" style="z-index: 100;">
          <span style="flex: 1 1 auto;"></span>
          <span>Inventory Table</span>
          <span style="flex: 1 1 auto;"></span>
        </mat-toolbar>

        <div class="mat-elevation-z22 tab-container">

          <app-announcement>

          </app-announcement>

          <br />
          <mat-divider></mat-divider>
          <br />

          <ng-container *ngIf="isLoadedTab == false">
            <br />
            <br />
            <br />
            <br />
            <mat-spinner style="margin: auto"></mat-spinner>
          </ng-container>

          <ng-container *ngIf="isLoadedTab == true">

            <div class="mat-elevation-z4 rounded-container-title">
              <h2 style="text-align: center; color: white">
                Inventory Gallery
              </h2>
            </div>

            <div class="mat-elevation-z4 control-container">

              <div style="display: flex; align-items: baseline">
                <span style="flex: 1 1 auto;"></span>
                <mat-form-field appearance="outline" style=" min-width: 50% ;flex:auto;border-radius: 16px !important">
                  <mat-label>Search</mat-label>

                  <input matInput placeholder="Ex. Juan De" (keyup)="applyFilterInv($event)">
                </mat-form-field>
                <span style="flex: 1 1 auto;"></span>

                <button mat-raised-button color="primary" style="flex:auto">View Archived <mat-icon>recycling</mat-icon></button>&nbsp;

                <button mat-raised-button color="warn" class="control-button" style="flex:auto;"> Add Item <mat-icon>add</mat-icon></button>&nbsp;
                <span style="flex: 1 1 auto;"></span>

              </div>

              <mat-paginator #empPaginator [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"></mat-paginator>

            </div>

            <div class="mat-elevation-z4 rounded-container-flex">

              <div style="width: 100%; overflow-x: scroll;">

                <mat-table [dataSource]="inventoriesDataSource" class="mat-elevation-z0" style="width: 100%" matSort>

                  <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="number" sticky>
                    <mat-header-cell *matHeaderCellDef> Number </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.number}} </mat-cell>
                  </ng-container>  

                  <ng-container matColumnDef="_id" sticky>
                    <mat-header-cell *matHeaderCellDef> Database ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element._id}} </mat-cell>
                  </ng-container>                     

                  <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.inv_id}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="description">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Description </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.description}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="category">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.category}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.quantity}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="supplier">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Supplier </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.supplier}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="min_amount">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Minimum Amount </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.min_amount}} </mat-cell>
                  </ng-container>                   

                  <ng-container matColumnDef="price">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.price}} </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="actions" stickyEnd>
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let element">

                      <button mat-raised-button color="accent"> Edit <mat-icon>visibility</mat-icon> </button>

                    </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="inventoriesDisplayedColumns"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: inventoriesDisplayedColumns;"></mat-row>
                </mat-table>

              </div>

            </div>

            <br />
            <br />
            <mat-divider></mat-divider>
            <br />

          </ng-container>

        </div>

      </mat-tab>


    </mat-tab-group>






  </ng-container>

</ng-container>

<!--IF MOBILE-->

<ng-container *ngIf="isMobile == true">

</ng-container>



<ng-template #invEditDialog let-data>
  <h2 matDialogTitle>{{data._id}} | {{data.name}}</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <br />
    <mat-divider></mat-divider>
    <br />

    <div style="flex: auto; width: 100%; justify-content: center">
      <div class="inv-img-container mat-elevation-z4" style="max-width: 15%; background-image: url('{{data.imageUrl}}'); background-position: center; background-size: cover; opacity: .8 ">

      </div>
    </div>

    <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
      <mat-label>Database ID</mat-label>
      <input disabled matInput placeholder="Ex. Juan De" [(ngModel)]="data._id" [ngStyle]="{'background-color': data._id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.name" [ngStyle]="{'background-color': data.name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.category" [ngStyle]="{'background-color': data.category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.price" [ngStyle]="{'background-color': data.price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.quantity" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.min_amount" [ngStyle]="{'background-color': data.min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important" >
      <mat-label>{{data.updated_at | date : 'short'}}</mat-label>
      <input disabled matInput placeholder="{{data.updated_at | date : 'short'}}" [ngStyle]="{'background-color': data.updated_at? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.description" [ngStyle]="{'background-color': data.description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;


  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-raised-button matDialogClose color="primary" (click)="editInv(data)">Ok</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>
  </mat-dialog-actions>
</ng-template>

<ng-template #invAddDialog let-data>
  <h2 matDialogTitle>New Item</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <br />
    <mat-divider></mat-divider>
    <br />

    <!--<div style="flex: auto; width: 100%; justify-content: center">
      <div class="inv-img-container mat-elevation-z4" style="max-width: 15%; background-image: url('{{data.imageUrl}}'); background-position: center; background-size: cover; opacity: .8 ">

      </div>
    </div>-->

    <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.name" [ngStyle]="{'background-color': data.name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.category" [ngStyle]="{'background-color': data.category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.price" [ngStyle]="{'background-color': data.price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.quantity" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.min_amount" [ngStyle]="{'background-color': data.min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.description" [ngStyle]="{'background-color': data.description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-raised-button matDialogClose color="primary" (click)="newInv(data)">Ok</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>
  </mat-dialog-actions>
</ng-template>

<ng-template #invAddInvoiceDialog let-data>
  <h2 matDialogTitle>New Invoice</h2>
  <mat-dialog-content style="display:flex; align-content:center; flex-wrap:wrap">

    <br />
    <mat-divider></mat-divider>
    <br />

    <!--<div style="flex: auto; width: 100%; justify-content: center">
      <div class="inv-img-container mat-elevation-z4" style="max-width: 15%; background-image: url('{{data.imageUrl}}'); background-position: center; background-size: cover; opacity: .8 ">

      </div>
    </div>-->

    <mat-form-field appearance="outline" style=" min-width: 15% ;flex:auto;border-radius: 16px !important">
      <mat-label>ID</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.inv_id" [ngStyle]="{'background-color': data.inv_id? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.name" [ngStyle]="{'background-color': data.name? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Category</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.category" [ngStyle]="{'background-color': data.category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 20% ;flex:auto;border-radius: 16px !important">
      <mat-label>Supplier</mat-label>
      <input required matInput placeholder="Ex. Juan De" [(ngModel)]="data.category" [ngStyle]="{'background-color': data.category? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Price</mat-label>
      <input required matInput placeholder="Ex. Juan De" [(ngModel)]="data.price" [ngStyle]="{'background-color': data.price? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Quantity</mat-label>
      <input required matInput placeholder="Ex. Juan De" [(ngModel)]="data.quantity" [ngStyle]="{'background-color': data.quantity? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Minimum</mat-label>
      <input required matInput placeholder="Ex. Juan De" [(ngModel)]="data.min_amount" [ngStyle]="{'background-color': data.min_amount? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

    <mat-form-field appearance="outline" style=" min-width: 30% ;flex:auto;border-radius: 16px !important">
      <mat-label>Description</mat-label>
      <input matInput placeholder="Ex. Juan De" [(ngModel)]="data.description" [ngStyle]="{'background-color': data.description? '' : 'var(--warn-lighter-color)'}">
    </mat-form-field>&nbsp;

  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-raised-button matDialogClose color="primary" (click)="newInv(data)">Ok</button>
    <button mat-raised-button matDialogClose color="warn">Cancel</button>
  </mat-dialog-actions>
</ng-template>
